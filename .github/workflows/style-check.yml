######################################################################
# üßπ Python Style & Lint Check Workflow
#
# This workflow automatically checks your Python code formatting
# using Pyink (a fork of Black) and enforces linting with Pylint.
#
# ‚úÖ It runs on:
#   - Every push to ANY branch
#   - Every pull request
#
# ‚ùó If code is not formatted or has lint issues, the job fails.
#    This keeps your repository clean and consistent.
######################################################################

name: Python Style & Lint Check

on:
  push:          # Trigger on pushes
    branches:    # Apply to all branches
      - "**"
    # branches: [ main ]
  pull_request:  # Also trigger on pull requests
    branches:
      - "**"
    # branches: [ main ]

jobs:
  style-check:
    name: üßπ Code Formatting & Lint Check
    runs-on: ubuntu-latest  # Use the latest Ubuntu runner

    steps:
      ##################################################################
      # 1Ô∏è‚É£ Checkout repository
      #
      # This pulls your code from GitHub into the runner‚Äôs workspace.
      # It's required before running any commands on your files.
      ##################################################################
      - name: Checkout repository
        uses: actions/checkout@v4

      ##################################################################
      # 2Ô∏è‚É£ Set up Python
      #
      # You can adjust the Python version if your project uses another.
      ##################################################################
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      ##################################################################
      # 3Ô∏è‚É£ Install dependencies (Pyink + Pylint)
      #
      # - Pyink: formatter (Black-compatible)
      # - Pylint: static analysis (code quality/style)
      ##################################################################
      - name: Install linting tools
        run: |
          pip install pyink pylint

      ##################################################################
      # 4Ô∏è‚É£ Run Pyink in check mode
      #
      # This checks if code is properly formatted without changing it.
      #
      # ‚ñ∂ Command explanation:
      #   pyink --line-length 80 --preview --diff .
      #
      #   --line-length 80   ‚Üí max characters per line
      #   --preview          ‚Üí enables new formatting features
      #   --diff             ‚Üí shows what would be changed (in diff form)
      #   .                  ‚Üí target current directory recursively
      #
      # If files are not correctly formatted, this step fails.
      ##################################################################
      # - name: Check code formatting with Pyink
      #   run: |
      #     echo "üîç Checking Pyink formatting..."
      #     pyink --line-length 80 --preview --diff .
      - name: Check code formatting with Pyink
        run: pyink --diff --check .
